echo "ğŸ” Running pre-commit checks..."
echo ""

# Ensure Foundry is in PATH (for systems like Fork that don't source shell configs)
export PATH="$HOME/.foundry/bin:$PATH"

# Run lint-staged for linting and formatting
echo "ğŸ“ Linting and formatting..."
npx lint-staged || {
  echo "âŒ Linting failed! Fix errors before committing."
  exit 1
}

# Run Hardhat tests
echo ""
echo "ğŸ§ª Running Hardhat tests..."
npm test || {
  echo "âŒ Hardhat tests failed! Fix tests before committing."
  exit 1
}

# Run Foundry tests
echo ""
echo "âš¡ Running Foundry tests..."
npm run test:foundry || {
  echo "âŒ Foundry tests failed! Fix tests before committing."
  exit 1
}

echo ""
echo "âœ… All pre-commit checks passed!"
